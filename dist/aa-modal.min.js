!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):"undefined"!=typeof exports?module.exports=e(require("jquery")):e(jQuery)}(function(d){"use strict";let C=!1,c=!1,u="[aa-modal]",I="[aa-modal-close]",g=d("<style></style"),m='\nbody.aa-modal-open {\noverflow: hidden;\n}\n.aa-modal {\nposition: fixed;\ntop: 0;\nleft: 0;\nwidth: 100vw;\nheight: 100vh;\nbackground-color: rgba(0,0,0,.5);\ncursor: pointer;\nz-index: 999999;\n}\n.aa-modal__body {\nposition: absolute;\ntop: 50%;\nleft: 50%;\nwidth: calc(100vw - 40px);\nmax-width: 600px;\nheight: auto;\nmax-height: calc(100vh - 40px);\npadding: 55px 30px 45px;\nbackground-color: #fff;\nborder-radius: 5px;\ntransform: translate(-50%, -50%);\ncursor: default;\noverflow-y: auto;\nz-index: 1000000;\n}\n.aa-modal__body--loading {\nmin-height: 200px;\n}\n.aa-modal__body::before {\ncontent: "";\nposition: absolute;\ntop: 0;\nleft: 0;\nwidth: 100%;\nheight: 100%;\nbackground-color: #fff;\nbackground-image: url("data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IiB2aWV3Qm94PSIwIDAgMTAwIDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAxMDAgNjA7IiB4bWw6c3BhY2U9InByZXNlcnZlIiBmaWxsPSIjMDAwMDAwIiB3aWR0aD0iMTAwIiBoZWlnaGl0PSIxMDAiPg0KCTxjaXJjbGUgY3g9IjMzLjMiIGN5PSIzMCIgcj0iNSIgZmlsbC1vcGFjaXR5PSIwLjUiPg0KCQk8YW5pbWF0ZSANCgkJCWF0dHJpYnV0ZU5hbWU9ImZpbGwtb3BhY2l0eSIgDQoJCQlmcm9tPSIwLjUiIA0KCQkJdG89IjAuNSIgDQoJCQliZWdpbj0iMHMiIA0KCQkJZHVyPSIwLjc1cyIgDQoJCQl2YWx1ZXM9IjAuNTswLjk7MC41OzAuMTswLjUiIA0KCQkJcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiDQoJCQlrZXlTcGxpbmVzPSINCgkJCQkwIDAgMC42NSAxOw0KCQkJCTAuNjUgMCAxIDE7DQoJCQkJMCAwIDAuNjUgMTsNCgkJCQkwLjY1IDAgMSAxOw0KCQkJIg0KCQkJa2V5VGltZXM9IjA7MC4yNTswLjU7MC43NTsxIg0KCQkJY2FsY01vZGU9InNwbGluZSINCgkJLz4NCgkJPGFuaW1hdGUgDQoJCQlhdHRyaWJ1dGVOYW1lPSJjeSIgDQoJCQlmcm9tPSIzMCIgDQoJCQl0bz0iMzAiIA0KCQkJYmVnaW49IjBzIiANCgkJCWR1cj0iMC43NXMiIA0KCQkJdmFsdWVzPSIzMDsyMDszMDs0MDszMCIgDQoJCQlyZXBlYXRDb3VudD0iaW5kZWZpbml0ZSINCgkJCWtleVNwbGluZXM9Ig0KCQkJCTAgMCAwLjY1IDE7DQoJCQkJMC42NSAwIDEgMTsNCgkJCQkwIDAgMC42NSAxOw0KCQkJCTAuNjUgMCAxIDE7DQoJCQkiDQoJCQlrZXlUaW1lcz0iMDswLjI1OzAuNTswLjc1OzEiDQoJCQljYWxjTW9kZT0ic3BsaW5lIg0KCQkvPg0KCQk8YW5pbWF0ZSANCgkJCWF0dHJpYnV0ZU5hbWU9InIiIA0KCQkJZnJvbT0iNSIgDQoJCQl0bz0iNSIgDQoJCQliZWdpbj0iMHMiIA0KCQkJZHVyPSIwLjc1cyIgDQoJCQl2YWx1ZXM9IjU7NDs1OzY7NSIgDQoJCQlyZXBlYXRDb3VudD0iaW5kZWZpbml0ZSINCgkJCWtleVNwbGluZXM9Ig0KCQkJCTAgMCAwLjY1IDE7DQoJCQkJMC42NSAwIDEgMTsNCgkJCQkwIDAgMC42NSAxOw0KCQkJCTAuNjUgMCAxIDE7DQoJCQkiDQoJCQlrZXlUaW1lcz0iMDswLjI1OzAuNTswLjc1OzEiDQoJCQljYWxjTW9kZT0ic3BsaW5lIg0KCQkvPg0KCTwvY2lyY2xlPg0KCTxjaXJjbGUgY3g9IjUwIiBjeT0iMjAiIHI9IjQiIGZpbGwtb3BhY2l0eT0iMC45Ij4NCgkJPGFuaW1hdGUgDQoJCQlhdHRyaWJ1dGVOYW1lPSJmaWxsLW9wYWNpdHkiDQoJCQlmcm9tPSIwLjkiDQoJCQl0bz0iMC45Ig0KCQkJYmVnaW49IjBzIg0KCQkJZHVyPSIwLjc1cyINCgkJCXZhbHVlcz0iMC45OzAuNTswLjE7MC41OzAuOSIgDQoJCQlyZXBlYXRDb3VudD0iaW5kZWZpbml0ZSINCgkJCWtleVNwbGluZXM9Ig0KCQkJCTAuNjUgMCAxIDE7DQoJCQkJMCAwIDAuNjUgMTsNCgkJCQkwLjY1IDAgMSAxOw0KCQkJCTAgMCAwLjY1IDE7DQoJCQkiDQoJCQlrZXlUaW1lcz0iMDswLjI1OzAuNTswLjc1OzEiDQoJCQljYWxjTW9kZT0ic3BsaW5lIg0KCQkvPg0KCQk8YW5pbWF0ZSANCgkJCWF0dHJpYnV0ZU5hbWU9ImN5Ig0KCQkJZnJvbT0iMTUiDQoJCQl0bz0iMTUiDQoJCQliZWdpbj0iMHMiDQoJCQlkdXI9IjAuNzVzIg0KCQkJdmFsdWVzPSIyMDszMDs0MDszMDsyMCIgDQoJCQlyZXBlYXRDb3VudD0iaW5kZWZpbml0ZSINCgkJCWtleVNwbGluZXM9Ig0KCQkJCTAuNjUgMCAxIDE7DQoJCQkJMCAwIDAuNjUgMTsNCgkJCQkwLjY1IDAgMSAxOw0KCQkJCTAgMCAwLjY1IDE7DQoJCQkiDQoJCQlrZXlUaW1lcz0iMDswLjI1OzAuNTswLjc1OzEiDQoJCQljYWxjTW9kZT0ic3BsaW5lIg0KCQkvPg0KCQk8YW5pbWF0ZSANCgkJCWF0dHJpYnV0ZU5hbWU9InIiIA0KCQkJZnJvbT0iNCIgDQoJCQl0bz0iNCINCgkJCWJlZ2luPSIwcyIgDQoJCQlkdXI9IjAuNzVzIiANCgkJCXZhbHVlcz0iNDs1OzY7NTs0Ig0KCQkJcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiDQoJCQlrZXlTcGxpbmVzPSINCgkJCQkwLjY1IDAgMSAxOw0KCQkJCTAgMCAwLjY1IDE7DQoJCQkJMC42NSAwIDEgMTsNCgkJCQkwIDAgMC42NSAxOw0KCQkJIg0KCQkJa2V5VGltZXM9IjA7MC4yNTswLjU7MC43NTsxIg0KCQkJY2FsY01vZGU9InNwbGluZSINCgkJLz4NCgk8L2NpcmNsZT4NCgk8Y2lyY2xlIGN4PSI2Ni42IiBjeT0iMzAiIHI9IjUiIGZpbGwtb3BhY2l0eT0iMC41Ij4NCgkJPGFuaW1hdGUgDQoJCQlhdHRyaWJ1dGVOYW1lPSJmaWxsLW9wYWNpdHkiDQoJCQlmcm9tPSIwLjUiIA0KCQkJdG89IjAuNSINCgkJCWJlZ2luPSIwcyIgDQoJCQlkdXI9IjAuNzVzIiANCgkJCXZhbHVlcz0iMC41OzAuMTswLjU7MC45OzAuNSINCgkJCXJlcGVhdENvdW50PSJpbmRlZmluaXRlIg0KCQkJa2V5U3BsaW5lcz0iDQoJCQkJMCAwIDAuNjUgMTsNCgkJCQkwLjY1IDAgMSAxOw0KCQkJCTAgMCAwLjY1IDE7DQoJCQkJMC42NSAwIDEgMTsNCgkJCSINCgkJCWtleVRpbWVzPSIwOzAuMjU7MC41OzAuNzU7MSINCgkJCWNhbGNNb2RlPSJzcGxpbmUiDQoJCS8+DQoJCTxhbmltYXRlIA0KCQkJYXR0cmlidXRlTmFtZT0iY3kiDQoJCQlmcm9tPSIzMCIgDQoJCQl0bz0iMzAiDQoJCQliZWdpbj0iMHMiIA0KCQkJZHVyPSIwLjc1cyINCgkJCXZhbHVlcz0iMzA7NDA7MzA7MjA7MzAiIA0KCQkJcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiDQoJCQlrZXlTcGxpbmVzPSINCgkJCQkwIDAgMC42NSAxOw0KCQkJCTAuNjUgMCAxIDE7DQoJCQkJMCAwIDAuNjUgMTsNCgkJCQkwLjY1IDAgMSAxOw0KCQkJIg0KCQkJa2V5VGltZXM9IjA7MC4yNTswLjU7MC43NTsxIg0KCQkJY2FsY01vZGU9InNwbGluZSINCgkJLz4NCgkJPGFuaW1hdGUgDQoJCQlhdHRyaWJ1dGVOYW1lPSJyIg0KCQkJZnJvbT0iNSIgDQoJCQl0bz0iNSINCgkJCWJlZ2luPSIwcyIgDQoJCQlkdXI9IjAuNzVzIiANCgkJCXZhbHVlcz0iNTs2OzU7NDs1Ig0KCQkJcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiDQoJCQlrZXlTcGxpbmVzPSINCgkJCQkwIDAgMC42NSAxOw0KCQkJCTAuNjUgMCAxIDE7DQoJCQkJMCAwIDAuNjUgMTsNCgkJCQkwLjY1IDAgMSAxOw0KCQkJIg0KCQkJa2V5VGltZXM9IjA7MC4yNTswLjU7MC43NTsxIg0KCQkJY2FsY01vZGU9InNwbGluZSINCgkJLz4NCgk8L2NpcmNsZT4NCjwvc3ZnPg0K");\nbackground-position: center;\nbackground-repeat: no-repeat;\nbackground-size: 120px 120px;\nopacity: 0;\ntransition-delay: 0s, .3s;\ntransition-duration: .3s, 0s;\ntransition-property: opacity, z-index;\nz-index: -1;\n}\n.aa-modal__body--loading::before {\nopacity: 1;\nz-index: 2;\n}\n.aa-modal__close {\nposition: absolute;\ntop: 20px;\nright: 20px;\ndisplay: flex;\njustify-content: center;\nalign-items: center;\nwidth: 20px;\nheight: 20px;\npadding: 0;\nbackground-color: transparent;\nborder: none;\ncursor: pointer;\n}\n.aa-modal__close path {\nfill: #000;\ntransition: fill .3s;\n}\n.aa-modal__close:focus {\noutline: none;\n}\n.aa-modal__close:hover path,\n.aa-modal__close:focus path {\nfill: rgba(0,0,0,.5);\n}\n';const Q={fadeIn:{classes:{modal:" aa-modal__body--animated aa-modal__body--fade-in"},functions:{open:function(e,n){let o=d.Deferred();return e.fadeIn(n,function(){e.removeClass(Q.fadeIn.classes.modal),o.resolve()}),o.promise()},close:function(e,n){let o=d.Deferred();return e.addClass(Q.fadeIn.classes.modal).fadeOut(n,function(){e.removeClass(Q.fadeIn.classes.modal).hide(),o.resolve()}),o.promise()}}},fromTop:{classes:{modal:" aa-modal__body--animated aa-modal__body--from-top"},functions:{open:function(e,n){let o=d.Deferred();e.removeAttr("style");var t=e.outerHeight();return e.css({top:"-"+(t/2+50)+"px"}).animate({top:"50%"},n,function(){e.removeClass("aa-modal__body--animated aa-modal__body--from-top"),o.resolve()}),o.promise()},close:function(e,n){let o=d.Deferred(),t=e.outerHeight();return e.addClass(Q.fromTop.classes.modal).animate({top:"-"+(t/2+50)+"px"},n,function(){e.removeClass(Q.fromTop.classes.modal).hide(),o.resolve()}),o.promise()}}}},t={0:"Reserved",1:"Method does not exist in AA Modal",2:"Wrong option data type",3:"Option is not a valid number",4:"Modal content source is not specified",5:"External button request failed",6:"External button file contains invalid data",7:"Modal content request failed",8:"Option value is not supported",9:"Something went wrong during modal creating"};let J={src:!1,id:!1,class:!1,closeBtnText:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="20" height="2 x="0px" y="0px" viewBox="0 0 212.982 212.982" style="enable-background:new 0 0 212.982 212.982;" xml:space="preserve">\n<path fill="#000000" d="M131.804,106.491l75.936-75.936c6.99-6.99,6.99-18.323,0-25.312 c-6.99-6.99-18.322-6.99-25.312,0l-75.937,75.937L30.554,5.242c-6.99-6.99-18.322-6.99-25.312,0c-6.989,6.99-6.989,18.323,0,25.312 l75.937,75.936L5.242,182.427c-6.989,6.99-6.989,18.323,0,25.312c6.99,6.99,18.322,6.99,25.312,0l75.937-75.937l75.937,75.937 c6.989,6.99,18.322,6.99,25.312,0c6.99-6.99,6.99-18.322,0-25.312L131.804,106.491z"/>\n</svg>',closeBtnExternal:!1,closeBtnSelector:!1,animation:!1,animationDuration:400,overlayFadeDuration:200,onOpenStart:function(){},onOpenEnd:function(){},onCloseStart:function(){},onCloseEnd:function(){}},n={init:function(e){let o=d.extend(!0,{},J,e);var n,t=o;for(n in t){var a=typeof t[n];if(!1!==t[n])switch(n){case"onOpenStart":case"onOpenEnd":case"onCloseStart":case"onCloseEnd":"function"!=a&&k(2,n);break;case"animation":"string"!=a&&k(2,n),t[n]in Q==!1&&k(8,t[n]);break;case"animationDuration":case"overlayFadeDuration":"string"!=a&&"number"!=a&&k(2,n);var i=parseInt(t[n]);Number.isInteger(i)||k(3,n);break;case"id":"string"!=a&&k(2,n),t[n]=t[n].replaceAll(" ","");break;default:"string"!=a&&k(2,n)}}return this.each(function(){d(this).on("click",o,function(e){var n=d(this);C||p(o,n,e)})})},close:function(){C||console.log("close method is WIP")}};function k(e,n=!1){let o=t[e];n&&(o+=": "+n),d.error(o)}function s(o,e){let t=d.Deferred(),a=void 0!==e.attr("aa-modal-src")?e.attr("aa-modal-src").toString():o.src,n=I+", "+o.closeBtnSelector,i=d('<div class="aa-modal'+(0==o.overlayFadeDuration?"":" aa-modal--fade")+'"'+(0==o.overlayFadeDuration?"":' style="display: none;"')+"></div>"),l=d('<div class="aa-modal__body aa-modal__body--loading'+(!1===o.animation?"":Q[o.animation].classes.modal)+'"'+(!1===o.animation?"":' style="display: none;"')+"></div>"),s=d('<button class="aa-modal__close" type="button" aa-modal-close=""></button>');void 0===a&&k(4);function r(){let e=d.Deferred();return d.when().then(function(){let e=d.Deferred();return o.overlayFadeDuration?i.fadeIn(o.overlayFadeDuration,function(){i.removeClass("aa-modal--fade"),e.resolve()}):e.resolve(),e.promise()}).then(function(){let e=d.Deferred();return function(e,n,o){let t=d.Deferred();e.closeBtnExternal?function(e,o,t){return d.ajax({url:e,dataType:"html",contentType:!1,processData:!1,timeout:1e4,success:function(e){e=d(e).filter("svg");e.length?o.html(e):(o.html(t),k(6))},error:function(e,n){o.html(t),k(5,"timeout"==n?n:e.statusText)}})}(e.closeBtnExternal,o,n.closeBtnText).then(function(){t.resolve()}):(e.closeBtnText?o.html(e.closeBtnText):o.html(n.closeBtnText),t.resolve());return t.promise()}(o,J,s).then(function(){o.closeBtnText&&l.append(s),o.id&&l.prop("id",o.id),o.class&&l.addClass(o.class),e.resolve()}),e.promise()}).then(function(){let e=d.Deferred();return i.append(l),o.animation?Q[o.animation].functions.open(l,o.animationDuration).then(function(){e.resolve()}):e.resolve(),e.promise()}).then(function(){var e=d.Deferred();return i.on("click",function(e){l.is(e.target)||0!==l.has(e.target).length||C||f(o,d(e.target),e)}),l.on("click",n,function(e){C||f(o,d(e.target),e)}),l.on("keydown",function(e){let n=d(this),o=d(e.target),t=e.shiftKey,a="a[href]:visible, area[href]:visible, input:visible:not([disabled]), select:visible:not([disabled]), textarea:visible:not([disabled]), button:visible:not([disabled]), iframe:visible, object:visible, embed:visible, [tabindex]:visible, [contenteditable]:visible",i,l;if("Tab"===e.key)return l=t?(i=n.find(a).first(),n.find(a).last()):(i=n.find(a).last(),n.find(a).first()),!i.length||(!o.is(i)||(l.focus(),!1))}),d(document).on("keyup",function(e){!c||"Escape"!==e.key&&"Esc"!==e.key||C||f(o,d(e.target),e)}),i.on("click",u,function(e){i.off(),l.off(),C||p(o,d(e.target),e)}),e.resolve(),e.promise()}).then(function(){e.resolve()}),e.promise()}return d.when().then(function(){let e=d.Deferred();var n;return c?(i=d("body").find(".aa-modal"),l=i.children(),o.animation?Q[o.animation].functions.close(l,o.animationDuration).then(function(){l.html("").addClass("aa-modal__body--loading"),e.resolve()}):(l.html(""),e.resolve())):(g.text(m),n=g,d("head").prepend(n),d("body").append(i).addClass("aa-modal-open"),e.resolve()),e.promise()}).then(function(){var e,n;d.when(r(),(e=a,n=l,d.ajax({url:e,dataType:"html",contentType:!1,processData:!1,timeout:1e4,success:function(e){n.append(e).removeClass("aa-modal__body--loading")},error:function(e,n){k(7,"timeout"==n?n:e.statusText)}}))).done(function(){t.resolve()}).fail(function(e){k(9,e)})}),t.promise()}function r(n){let e=d.Deferred(),o=d("body").find(".aa-modal"),t=o.children(".aa-modal__body");var a,i,l;return a=o,i=t,l=d.Deferred(),a.off(),i.off(),l.resolve(),l.promise().then(function(){let e=d.Deferred();return n.animation?Q[n.animation].functions.close(t,n.animationDuration).then(function(){e.resolve()}):e.resolve(),e.promise()}).then(function(){let e=d.Deferred();return n.overlayFadeDuration?o.addClass("aa-modal--fade").fadeOut(n.overlayFadeDuration,function(){o.remove(),e.resolve()}):o.remove(),e.promise()}).then(function(){d("body").removeClass("aa-modal-open"),g.remove(),e.resolve()}),e.promise()}function p(e,n,o){var t,a,i,l;t=e,a=n,i=o,l=d.Deferred(),t.onOpenStart(i,a),C=!0,l.resolve(t,a),l.promise().then(s).then(function(){C=!1,c=!0,e.onOpenEnd(o,n)})}function f(e,n,o){var t,a,i,l;t=e,a=n,i=o,l=d.Deferred(),t.onCloseStart(i,a),C=!0,l.resolve(t),l.promise().then(r).then(function(){C=!1,c=!1,e.onCloseEnd(o,n)})}d.fn.aamodal=function(e){return n[e]?n[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void k(1,e):n.init.apply(this,arguments)}});