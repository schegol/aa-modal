!function(n){"use strict";"function"==typeof define&&define.amd?define(["jquery"],n):"undefined"!=typeof exports?module.exports=n(require("jquery")):n(jQuery)}(function(c){"use strict";let i=!1,g="[aa-modal-close]",e=c("<style></style"),C='\nbody.aa-modal-open {\noverflow: hidden;\n}\n.aa-modal {\nposition: fixed;\ntop: 0;\nleft: 0;\nwidth: 100vw;\nheight: 100vh;\nbackground-color: rgba(0,0,0,.5);\ncursor: pointer;\nz-index: 999999;\n}\n.aa-modal__body {\nposition: absolute;\ntop: 50%;\nleft: 50%;\nwidth: calc(100vw - 40px);\nmax-width: 600px;\nheight: auto;\nmax-height: calc(100vh - 40px);\npadding: 55px 30px 45px;\nbackground-color: #fff;\nborder-radius: 5px;\ntransform: translate(-50%, -50%);\ncursor: default;\noverflow-y: auto;\nz-index: 1000000;\n}\n.aa-modal__body--loading::before {\ncontent: "";\nposition: absolute;\ntop: 0;\nleft: 0;\nwidth: 100%;\nheight: 100%;\nbackground-color: #fff;\nbackground-image: url("data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IiB2aWV3Qm94PSIwIDAgMTAwIDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAxMDAgNjA7IiB4bWw6c3BhY2U9InByZXNlcnZlIiBmaWxsPSIjMDAwMDAwIiB3aWR0aD0iMTAwIiBoZWlnaGl0PSIxMDAiPg0KCTxjaXJjbGUgY3g9IjMzLjMiIGN5PSIzMCIgcj0iNSIgZmlsbC1vcGFjaXR5PSIwLjUiPg0KCQk8YW5pbWF0ZSANCgkJCWF0dHJpYnV0ZU5hbWU9ImZpbGwtb3BhY2l0eSIgDQoJCQlmcm9tPSIwLjUiIA0KCQkJdG89IjAuNSIgDQoJCQliZWdpbj0iMHMiIA0KCQkJZHVyPSIwLjc1cyIgDQoJCQl2YWx1ZXM9IjAuNTswLjk7MC41OzAuMTswLjUiIA0KCQkJcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiDQoJCQlrZXlTcGxpbmVzPSINCgkJCQkwIDAgMC42NSAxOw0KCQkJCTAuNjUgMCAxIDE7DQoJCQkJMCAwIDAuNjUgMTsNCgkJCQkwLjY1IDAgMSAxOw0KCQkJIg0KCQkJa2V5VGltZXM9IjA7MC4yNTswLjU7MC43NTsxIg0KCQkJY2FsY01vZGU9InNwbGluZSINCgkJLz4NCgkJPGFuaW1hdGUgDQoJCQlhdHRyaWJ1dGVOYW1lPSJjeSIgDQoJCQlmcm9tPSIzMCIgDQoJCQl0bz0iMzAiIA0KCQkJYmVnaW49IjBzIiANCgkJCWR1cj0iMC43NXMiIA0KCQkJdmFsdWVzPSIzMDsyMDszMDs0MDszMCIgDQoJCQlyZXBlYXRDb3VudD0iaW5kZWZpbml0ZSINCgkJCWtleVNwbGluZXM9Ig0KCQkJCTAgMCAwLjY1IDE7DQoJCQkJMC42NSAwIDEgMTsNCgkJCQkwIDAgMC42NSAxOw0KCQkJCTAuNjUgMCAxIDE7DQoJCQkiDQoJCQlrZXlUaW1lcz0iMDswLjI1OzAuNTswLjc1OzEiDQoJCQljYWxjTW9kZT0ic3BsaW5lIg0KCQkvPg0KCQk8YW5pbWF0ZSANCgkJCWF0dHJpYnV0ZU5hbWU9InIiIA0KCQkJZnJvbT0iNSIgDQoJCQl0bz0iNSIgDQoJCQliZWdpbj0iMHMiIA0KCQkJZHVyPSIwLjc1cyIgDQoJCQl2YWx1ZXM9IjU7NDs1OzY7NSIgDQoJCQlyZXBlYXRDb3VudD0iaW5kZWZpbml0ZSINCgkJCWtleVNwbGluZXM9Ig0KCQkJCTAgMCAwLjY1IDE7DQoJCQkJMC42NSAwIDEgMTsNCgkJCQkwIDAgMC42NSAxOw0KCQkJCTAuNjUgMCAxIDE7DQoJCQkiDQoJCQlrZXlUaW1lcz0iMDswLjI1OzAuNTswLjc1OzEiDQoJCQljYWxjTW9kZT0ic3BsaW5lIg0KCQkvPg0KCTwvY2lyY2xlPg0KCTxjaXJjbGUgY3g9IjUwIiBjeT0iMjAiIHI9IjQiIGZpbGwtb3BhY2l0eT0iMC45Ij4NCgkJPGFuaW1hdGUgDQoJCQlhdHRyaWJ1dGVOYW1lPSJmaWxsLW9wYWNpdHkiDQoJCQlmcm9tPSIwLjkiDQoJCQl0bz0iMC45Ig0KCQkJYmVnaW49IjBzIg0KCQkJZHVyPSIwLjc1cyINCgkJCXZhbHVlcz0iMC45OzAuNTswLjE7MC41OzAuOSIgDQoJCQlyZXBlYXRDb3VudD0iaW5kZWZpbml0ZSINCgkJCWtleVNwbGluZXM9Ig0KCQkJCTAuNjUgMCAxIDE7DQoJCQkJMCAwIDAuNjUgMTsNCgkJCQkwLjY1IDAgMSAxOw0KCQkJCTAgMCAwLjY1IDE7DQoJCQkiDQoJCQlrZXlUaW1lcz0iMDswLjI1OzAuNTswLjc1OzEiDQoJCQljYWxjTW9kZT0ic3BsaW5lIg0KCQkvPg0KCQk8YW5pbWF0ZSANCgkJCWF0dHJpYnV0ZU5hbWU9ImN5Ig0KCQkJZnJvbT0iMTUiDQoJCQl0bz0iMTUiDQoJCQliZWdpbj0iMHMiDQoJCQlkdXI9IjAuNzVzIg0KCQkJdmFsdWVzPSIyMDszMDs0MDszMDsyMCIgDQoJCQlyZXBlYXRDb3VudD0iaW5kZWZpbml0ZSINCgkJCWtleVNwbGluZXM9Ig0KCQkJCTAuNjUgMCAxIDE7DQoJCQkJMCAwIDAuNjUgMTsNCgkJCQkwLjY1IDAgMSAxOw0KCQkJCTAgMCAwLjY1IDE7DQoJCQkiDQoJCQlrZXlUaW1lcz0iMDswLjI1OzAuNTswLjc1OzEiDQoJCQljYWxjTW9kZT0ic3BsaW5lIg0KCQkvPg0KCQk8YW5pbWF0ZSANCgkJCWF0dHJpYnV0ZU5hbWU9InIiIA0KCQkJZnJvbT0iNCIgDQoJCQl0bz0iNCINCgkJCWJlZ2luPSIwcyIgDQoJCQlkdXI9IjAuNzVzIiANCgkJCXZhbHVlcz0iNDs1OzY7NTs0Ig0KCQkJcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiDQoJCQlrZXlTcGxpbmVzPSINCgkJCQkwLjY1IDAgMSAxOw0KCQkJCTAgMCAwLjY1IDE7DQoJCQkJMC42NSAwIDEgMTsNCgkJCQkwIDAgMC42NSAxOw0KCQkJIg0KCQkJa2V5VGltZXM9IjA7MC4yNTswLjU7MC43NTsxIg0KCQkJY2FsY01vZGU9InNwbGluZSINCgkJLz4NCgk8L2NpcmNsZT4NCgk8Y2lyY2xlIGN4PSI2Ni42IiBjeT0iMzAiIHI9IjUiIGZpbGwtb3BhY2l0eT0iMC41Ij4NCgkJPGFuaW1hdGUgDQoJCQlhdHRyaWJ1dGVOYW1lPSJmaWxsLW9wYWNpdHkiDQoJCQlmcm9tPSIwLjUiIA0KCQkJdG89IjAuNSINCgkJCWJlZ2luPSIwcyIgDQoJCQlkdXI9IjAuNzVzIiANCgkJCXZhbHVlcz0iMC41OzAuMTswLjU7MC45OzAuNSINCgkJCXJlcGVhdENvdW50PSJpbmRlZmluaXRlIg0KCQkJa2V5U3BsaW5lcz0iDQoJCQkJMCAwIDAuNjUgMTsNCgkJCQkwLjY1IDAgMSAxOw0KCQkJCTAgMCAwLjY1IDE7DQoJCQkJMC42NSAwIDEgMTsNCgkJCSINCgkJCWtleVRpbWVzPSIwOzAuMjU7MC41OzAuNzU7MSINCgkJCWNhbGNNb2RlPSJzcGxpbmUiDQoJCS8+DQoJCTxhbmltYXRlIA0KCQkJYXR0cmlidXRlTmFtZT0iY3kiDQoJCQlmcm9tPSIzMCIgDQoJCQl0bz0iMzAiDQoJCQliZWdpbj0iMHMiIA0KCQkJZHVyPSIwLjc1cyINCgkJCXZhbHVlcz0iMzA7NDA7MzA7MjA7MzAiIA0KCQkJcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiDQoJCQlrZXlTcGxpbmVzPSINCgkJCQkwIDAgMC42NSAxOw0KCQkJCTAuNjUgMCAxIDE7DQoJCQkJMCAwIDAuNjUgMTsNCgkJCQkwLjY1IDAgMSAxOw0KCQkJIg0KCQkJa2V5VGltZXM9IjA7MC4yNTswLjU7MC43NTsxIg0KCQkJY2FsY01vZGU9InNwbGluZSINCgkJLz4NCgkJPGFuaW1hdGUgDQoJCQlhdHRyaWJ1dGVOYW1lPSJyIg0KCQkJZnJvbT0iNSIgDQoJCQl0bz0iNSINCgkJCWJlZ2luPSIwcyIgDQoJCQlkdXI9IjAuNzVzIiANCgkJCXZhbHVlcz0iNTs2OzU7NDs1Ig0KCQkJcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiDQoJCQlrZXlTcGxpbmVzPSINCgkJCQkwIDAgMC42NSAxOw0KCQkJCTAuNjUgMCAxIDE7DQoJCQkJMCAwIDAuNjUgMTsNCgkJCQkwLjY1IDAgMSAxOw0KCQkJIg0KCQkJa2V5VGltZXM9IjA7MC4yNTswLjU7MC43NTsxIg0KCQkJY2FsY01vZGU9InNwbGluZSINCgkJLz4NCgk8L2NpcmNsZT4NCjwvc3ZnPg0K");\nbackground-position: center;\nbackground-repeat: no-repeat;\nbackground-size: 120px 120px;\nz-index: 2;\n}\n.aa-modal__close {\nposition: absolute;\ntop: 20px;\nright: 20px;\ndisplay: flex;\njustify-content: center;\nalign-items: center;\nwidth: 20px;\nheight: 20px;\npadding: 0;\nbackground-color: transparent;\nborder: none;\ncursor: pointer;\n}\n.aa-modal__close path {\nfill: #000;\ntransition: fill .3s;\n}\n.aa-modal__close:focus {\noutline: none;\n}\n.aa-modal__close:hover path,\n.aa-modal__close:focus path {\nfill: rgba(0,0,0,.5);\n}\n';const t={0:"Reserved",1:"Method does not exist in AA Modal",2:"Wrong option data type",3:"Option is not a valid number",4:"Modal content source is not specified",5:"External button request failed",6:"External button file contains invalid data",7:"Modal content request failed"};let Q={src:!1,id:!1,class:!1,closeBtnText:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 212.982 212.982" style="enable-background:new 0 0 212.982 212.982;" xml:space="preserve">\n<path fill="#000000" d="M131.804,106.491l75.936-75.936c6.99-6.99,6.99-18.323,0-25.312 c-6.99-6.99-18.322-6.99-25.312,0l-75.937,75.937L30.554,5.242c-6.99-6.99-18.322-6.99-25.312,0c-6.989,6.99-6.989,18.323,0,25.312 l75.937,75.936L5.242,182.427c-6.989,6.99-6.989,18.323,0,25.312c6.99,6.99,18.322,6.99,25.312,0l75.937-75.937l75.937,75.937 c6.989,6.99,18.322,6.99,25.312,0c6.99-6.99,6.99-18.322,0-25.312L131.804,106.491z"/>\n</svg>',closeBtnExternal:!1,closeBtnSelector:!1,animation:"fadeIn",animationDuration:1e3,animationTimingFunction:"linear",onOpenStart:function(){},onOpenEnd:function(){},onCloseStart:function(){},onCloseEnd:function(){}},o={init:function(n){let t=c.extend(!0,{},Q,n);var o,l=t;for(o in l){var e=typeof l[o];if(!1!==l[o])switch(o){case"onOpenStart":case"onOpenEnd":case"onCloseStart":case"onCloseEnd":"function"!=e&&J(2,o);break;case"animationDuration":"string"!=e&&"number"!=e&&J(2,o);var C=parseInt(l[o]);Number.isInteger(C)||J(3,o);break;default:"string"!=e&&J(2,o)}}return this.each(function(){c(this).on("click",t,function(n){var o,l,e,C=c(this);i||function(n,o,l){console.log("openModal chain: setOpenStart");var e=c.Deferred();return n.onOpenStart(l,o),i=!0,e.resolve(n,o),e.promise()}(o=t,l=C,e=n).then(s).then(I).done(function(){console.log("openModal chain: done"),i=!1,o.onOpenEnd(e,l)})})})},close:function(){console.log("close method called")}};function J(n,o=!1){let l=t[n];o&&(l+=": "+o),c.error(l)}function a(n,o){let l=n.src||o.attr("aa-modal-src").toString(),e=g+", "+n.closeBtnSelector,C=c('<div class="aa-modal"></div>'),t=c('<div class="aa-modal__body"></div>'),i=c('<button class="aa-modal__close" type="button" aa-modal-close=""></button>');var a,s,I;return void 0===l&&J(4),n.closeBtnExternal?(o=n.closeBtnExternal,a=i,s=Q.closeBtnText,c.ajax({url:o,dataType:"html",contentType:!1,processData:!1,timeout:15e3,success:function(n){n=c(n).filter("svg");n.length?a.html(n):(a.html(s),J(6))},error:function(n,o){a.html(s),J(5,"timeout"==o?o:n.statusText)}})):n.closeBtnText?i.html(n.closeBtnText):i.html(Q.closeBtnText),n.closeBtnText&&t.append(i),n.id&&t.prop("id",n.id),n.class&&t.addClass(n.class),t.addClass("aa-modal__body--loading"),I=t,c.ajax({url:l,dataType:"html",contentType:!1,processData:!1,timeout:15e3,success:function(n){I.append(n)},error:function(n,o){J(7,"timeout"==o?o:n.statusText)}}),C.append(t),C.on("click",function(n){console.log(n.target),t.is(n.target)||0!==t.has(n.target).length||console.log("time to close")}),t.on("click",e,function(){console.log("time to close")}),C}function s(n,o){console.log("openModal chain: makeNewModal");var l=c.Deferred(),n=a(n,o);return l.resolve(n),l.promise()}function I(n){console.log("openModal chain: addModalToDom");var o,l=c.Deferred();return e.text(C),o=e,c("head").prepend(o),c("body").append(n).addClass("aa-modal-open"),n.children().removeClass("aa-modal__body--loading"),l.resolve(),l.promise()}c.fn.aamodal=function(n){return o[n]?o[n].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof n&&n?void J(1,n):o.init.apply(this,arguments)}});