!function(n){"use strict";"function"==typeof define&&define.amd?define(["jquery"],n):"undefined"!=typeof exports?module.exports=n(require("jquery")):n(jQuery)}(function(s){"use strict";let a=!1,I=!1,c="[aa-modal-close]",g=s("<style></style"),Q='\nbody.aa-modal-open {\noverflow: hidden;\n}\n.aa-modal {\nposition: fixed;\ntop: 0;\nleft: 0;\nwidth: 100vw;\nheight: 100vh;\nbackground-color: rgba(0,0,0,.5);\ncursor: pointer;\nz-index: 999999;\n}\n.aa-modal__body {\nposition: absolute;\ntop: 50%;\nleft: 50%;\nwidth: calc(100vw - 40px);\nmax-width: 600px;\nheight: auto;\nmax-height: calc(100vh - 40px);\npadding: 55px 30px 45px;\nbackground-color: #fff;\nborder-radius: 5px;\ntransform: translate(-50%, -50%);\ncursor: default;\noverflow-y: auto;\nz-index: 1000000;\n}\n.aa-modal__body--loading {\nmin-height: 200px;\n}\n.aa-modal__body--loading::before {\ncontent: "";\nposition: absolute;\ntop: 0;\nleft: 0;\nwidth: 100%;\nheight: 100%;\nbackground-color: #fff;\nbackground-image: url("data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IiB2aWV3Qm94PSIwIDAgMTAwIDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAxMDAgNjA7IiB4bWw6c3BhY2U9InByZXNlcnZlIiBmaWxsPSIjMDAwMDAwIiB3aWR0aD0iMTAwIiBoZWlnaGl0PSIxMDAiPg0KCTxjaXJjbGUgY3g9IjMzLjMiIGN5PSIzMCIgcj0iNSIgZmlsbC1vcGFjaXR5PSIwLjUiPg0KCQk8YW5pbWF0ZSANCgkJCWF0dHJpYnV0ZU5hbWU9ImZpbGwtb3BhY2l0eSIgDQoJCQlmcm9tPSIwLjUiIA0KCQkJdG89IjAuNSIgDQoJCQliZWdpbj0iMHMiIA0KCQkJZHVyPSIwLjc1cyIgDQoJCQl2YWx1ZXM9IjAuNTswLjk7MC41OzAuMTswLjUiIA0KCQkJcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiDQoJCQlrZXlTcGxpbmVzPSINCgkJCQkwIDAgMC42NSAxOw0KCQkJCTAuNjUgMCAxIDE7DQoJCQkJMCAwIDAuNjUgMTsNCgkJCQkwLjY1IDAgMSAxOw0KCQkJIg0KCQkJa2V5VGltZXM9IjA7MC4yNTswLjU7MC43NTsxIg0KCQkJY2FsY01vZGU9InNwbGluZSINCgkJLz4NCgkJPGFuaW1hdGUgDQoJCQlhdHRyaWJ1dGVOYW1lPSJjeSIgDQoJCQlmcm9tPSIzMCIgDQoJCQl0bz0iMzAiIA0KCQkJYmVnaW49IjBzIiANCgkJCWR1cj0iMC43NXMiIA0KCQkJdmFsdWVzPSIzMDsyMDszMDs0MDszMCIgDQoJCQlyZXBlYXRDb3VudD0iaW5kZWZpbml0ZSINCgkJCWtleVNwbGluZXM9Ig0KCQkJCTAgMCAwLjY1IDE7DQoJCQkJMC42NSAwIDEgMTsNCgkJCQkwIDAgMC42NSAxOw0KCQkJCTAuNjUgMCAxIDE7DQoJCQkiDQoJCQlrZXlUaW1lcz0iMDswLjI1OzAuNTswLjc1OzEiDQoJCQljYWxjTW9kZT0ic3BsaW5lIg0KCQkvPg0KCQk8YW5pbWF0ZSANCgkJCWF0dHJpYnV0ZU5hbWU9InIiIA0KCQkJZnJvbT0iNSIgDQoJCQl0bz0iNSIgDQoJCQliZWdpbj0iMHMiIA0KCQkJZHVyPSIwLjc1cyIgDQoJCQl2YWx1ZXM9IjU7NDs1OzY7NSIgDQoJCQlyZXBlYXRDb3VudD0iaW5kZWZpbml0ZSINCgkJCWtleVNwbGluZXM9Ig0KCQkJCTAgMCAwLjY1IDE7DQoJCQkJMC42NSAwIDEgMTsNCgkJCQkwIDAgMC42NSAxOw0KCQkJCTAuNjUgMCAxIDE7DQoJCQkiDQoJCQlrZXlUaW1lcz0iMDswLjI1OzAuNTswLjc1OzEiDQoJCQljYWxjTW9kZT0ic3BsaW5lIg0KCQkvPg0KCTwvY2lyY2xlPg0KCTxjaXJjbGUgY3g9IjUwIiBjeT0iMjAiIHI9IjQiIGZpbGwtb3BhY2l0eT0iMC45Ij4NCgkJPGFuaW1hdGUgDQoJCQlhdHRyaWJ1dGVOYW1lPSJmaWxsLW9wYWNpdHkiDQoJCQlmcm9tPSIwLjkiDQoJCQl0bz0iMC45Ig0KCQkJYmVnaW49IjBzIg0KCQkJZHVyPSIwLjc1cyINCgkJCXZhbHVlcz0iMC45OzAuNTswLjE7MC41OzAuOSIgDQoJCQlyZXBlYXRDb3VudD0iaW5kZWZpbml0ZSINCgkJCWtleVNwbGluZXM9Ig0KCQkJCTAuNjUgMCAxIDE7DQoJCQkJMCAwIDAuNjUgMTsNCgkJCQkwLjY1IDAgMSAxOw0KCQkJCTAgMCAwLjY1IDE7DQoJCQkiDQoJCQlrZXlUaW1lcz0iMDswLjI1OzAuNTswLjc1OzEiDQoJCQljYWxjTW9kZT0ic3BsaW5lIg0KCQkvPg0KCQk8YW5pbWF0ZSANCgkJCWF0dHJpYnV0ZU5hbWU9ImN5Ig0KCQkJZnJvbT0iMTUiDQoJCQl0bz0iMTUiDQoJCQliZWdpbj0iMHMiDQoJCQlkdXI9IjAuNzVzIg0KCQkJdmFsdWVzPSIyMDszMDs0MDszMDsyMCIgDQoJCQlyZXBlYXRDb3VudD0iaW5kZWZpbml0ZSINCgkJCWtleVNwbGluZXM9Ig0KCQkJCTAuNjUgMCAxIDE7DQoJCQkJMCAwIDAuNjUgMTsNCgkJCQkwLjY1IDAgMSAxOw0KCQkJCTAgMCAwLjY1IDE7DQoJCQkiDQoJCQlrZXlUaW1lcz0iMDswLjI1OzAuNTswLjc1OzEiDQoJCQljYWxjTW9kZT0ic3BsaW5lIg0KCQkvPg0KCQk8YW5pbWF0ZSANCgkJCWF0dHJpYnV0ZU5hbWU9InIiIA0KCQkJZnJvbT0iNCIgDQoJCQl0bz0iNCINCgkJCWJlZ2luPSIwcyIgDQoJCQlkdXI9IjAuNzVzIiANCgkJCXZhbHVlcz0iNDs1OzY7NTs0Ig0KCQkJcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiDQoJCQlrZXlTcGxpbmVzPSINCgkJCQkwLjY1IDAgMSAxOw0KCQkJCTAgMCAwLjY1IDE7DQoJCQkJMC42NSAwIDEgMTsNCgkJCQkwIDAgMC42NSAxOw0KCQkJIg0KCQkJa2V5VGltZXM9IjA7MC4yNTswLjU7MC43NTsxIg0KCQkJY2FsY01vZGU9InNwbGluZSINCgkJLz4NCgk8L2NpcmNsZT4NCgk8Y2lyY2xlIGN4PSI2Ni42IiBjeT0iMzAiIHI9IjUiIGZpbGwtb3BhY2l0eT0iMC41Ij4NCgkJPGFuaW1hdGUgDQoJCQlhdHRyaWJ1dGVOYW1lPSJmaWxsLW9wYWNpdHkiDQoJCQlmcm9tPSIwLjUiIA0KCQkJdG89IjAuNSINCgkJCWJlZ2luPSIwcyIgDQoJCQlkdXI9IjAuNzVzIiANCgkJCXZhbHVlcz0iMC41OzAuMTswLjU7MC45OzAuNSINCgkJCXJlcGVhdENvdW50PSJpbmRlZmluaXRlIg0KCQkJa2V5U3BsaW5lcz0iDQoJCQkJMCAwIDAuNjUgMTsNCgkJCQkwLjY1IDAgMSAxOw0KCQkJCTAgMCAwLjY1IDE7DQoJCQkJMC42NSAwIDEgMTsNCgkJCSINCgkJCWtleVRpbWVzPSIwOzAuMjU7MC41OzAuNzU7MSINCgkJCWNhbGNNb2RlPSJzcGxpbmUiDQoJCS8+DQoJCTxhbmltYXRlIA0KCQkJYXR0cmlidXRlTmFtZT0iY3kiDQoJCQlmcm9tPSIzMCIgDQoJCQl0bz0iMzAiDQoJCQliZWdpbj0iMHMiIA0KCQkJZHVyPSIwLjc1cyINCgkJCXZhbHVlcz0iMzA7NDA7MzA7MjA7MzAiIA0KCQkJcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiDQoJCQlrZXlTcGxpbmVzPSINCgkJCQkwIDAgMC42NSAxOw0KCQkJCTAuNjUgMCAxIDE7DQoJCQkJMCAwIDAuNjUgMTsNCgkJCQkwLjY1IDAgMSAxOw0KCQkJIg0KCQkJa2V5VGltZXM9IjA7MC4yNTswLjU7MC43NTsxIg0KCQkJY2FsY01vZGU9InNwbGluZSINCgkJLz4NCgkJPGFuaW1hdGUgDQoJCQlhdHRyaWJ1dGVOYW1lPSJyIg0KCQkJZnJvbT0iNSIgDQoJCQl0bz0iNSINCgkJCWJlZ2luPSIwcyIgDQoJCQlkdXI9IjAuNzVzIiANCgkJCXZhbHVlcz0iNTs2OzU7NDs1Ig0KCQkJcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiDQoJCQlrZXlTcGxpbmVzPSINCgkJCQkwIDAgMC42NSAxOw0KCQkJCTAuNjUgMCAxIDE7DQoJCQkJMCAwIDAuNjUgMTsNCgkJCQkwLjY1IDAgMSAxOw0KCQkJIg0KCQkJa2V5VGltZXM9IjA7MC4yNTswLjU7MC43NTsxIg0KCQkJY2FsY01vZGU9InNwbGluZSINCgkJLz4NCgk8L2NpcmNsZT4NCjwvc3ZnPg0K");\nbackground-position: center;\nbackground-repeat: no-repeat;\nbackground-size: 120px 120px;\nz-index: 2;\n}\n.aa-modal__close {\nposition: absolute;\ntop: 20px;\nright: 20px;\ndisplay: flex;\njustify-content: center;\nalign-items: center;\nwidth: 20px;\nheight: 20px;\npadding: 0;\nbackground-color: transparent;\nborder: none;\ncursor: pointer;\n}\n.aa-modal__close path {\nfill: #000;\ntransition: fill .3s;\n}\n.aa-modal__close:focus {\noutline: none;\n}\n.aa-modal__close:hover path,\n.aa-modal__close:focus path {\nfill: rgba(0,0,0,.5);\n}\n';const l={0:"Reserved",1:"Method does not exist in AA Modal",2:"Wrong option data type",3:"Option is not a valid number",4:"Modal content source is not specified",5:"External button request failed",6:"External button file contains invalid data",7:"Modal content request failed"};let J={src:!1,id:!1,class:!1,closeBtnText:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 212.982 212.982" style="enable-background:new 0 0 212.982 212.982;" xml:space="preserve">\n<path fill="#000000" d="M131.804,106.491l75.936-75.936c6.99-6.99,6.99-18.323,0-25.312 c-6.99-6.99-18.322-6.99-25.312,0l-75.937,75.937L30.554,5.242c-6.99-6.99-18.322-6.99-25.312,0c-6.989,6.99-6.989,18.323,0,25.312 l75.937,75.936L5.242,182.427c-6.989,6.99-6.989,18.323,0,25.312c6.99,6.99,18.322,6.99,25.312,0l75.937-75.937l75.937,75.937 c6.989,6.99,18.322,6.99,25.312,0c6.99-6.99,6.99-18.322,0-25.312L131.804,106.491z"/>\n</svg>',closeBtnExternal:!1,closeBtnSelector:!1,animation:"fadeIn",animationDuration:1e3,animationTimingFunction:"linear",onOpenStart:function(){},onOpenEnd:function(){},onCloseStart:function(){},onCloseEnd:function(){}},o={init:function(n){let e=s.extend(!0,{},J,n);var o,l=e;for(o in l){var t=typeof l[o];if(!1!==l[o])switch(o){case"onOpenStart":case"onOpenEnd":case"onCloseStart":case"onCloseEnd":"function"!=t&&d(2,o);break;case"animationDuration":"string"!=t&&"number"!=t&&d(2,o);var i=parseInt(l[o]);Number.isInteger(i)||d(3,o);break;default:"string"!=t&&d(2,o)}}return this.each(function(){s(this).on("click",e,function(n){var o=s(this);a||k(e,o,n)})})},close:function(){console.log("close method called")}};function d(n,o=!1){let e=l[n];o&&(e+=": "+o),s.error(e)}function r(o,n){let e=s.Deferred(),l=o.src||n.attr("aa-modal-src").toString(),t=c+", "+o.closeBtnSelector,i=s('<div class="aa-modal"></div>'),C=s('<div class="aa-modal__body"></div>'),a=s('<button class="aa-modal__close" type="button" aa-modal-close=""></button>');return void 0===l&&d(4),I?(i=s("body").find(".aa-modal"),(C=i.children()).html("")):(g.text(Q),n=g,s("head").prepend(n),s("body").append(i).addClass("aa-modal-open")),function(n,o,e,l){let t=s.Deferred();return l.addClass("aa-modal__body--loading"),function(n,o,e){let l=s.Deferred();n.closeBtnExternal?function(n,e,l){return s.ajax({url:n,dataType:"html",contentType:!1,processData:!1,timeout:1e4,success:function(n){n=s(n).filter("svg");n.length?e.html(n):(e.html(l),d(6))},error:function(n,o){e.html(l),d(5,"timeout"==o?o:n.statusText)}})}(n.closeBtnExternal,e,o.closeBtnText).done(function(){l.resolve()}):(n.closeBtnText?e.html(n.closeBtnText):e.html(o.closeBtnText),l.resolve());return l.promise()}(n,o,e).then(function(){n.closeBtnText&&l.append(e),n.id&&l.prop("id",n.id),n.class&&l.addClass(n.class),t.resolve(l)}),t.promise()}(o,J,a,C).then(function(n){var o=s.Deferred();return i.append(n),o.resolve(),o.promise()}).then(function(){var n=s.Deferred();return i.on("click",function(n){C.is(n.target)||0!==C.has(n.target).length||console.log("time to close")}),C.on("click",t,function(){console.log("time to close")}),i.on("click","[aa-modal]",function(n){i.off(),C.off(),k(o,s(n.target),n)}),n.resolve(),n.promise()}).then(function(){var n,o;n=l,o=C,s.ajax({url:n,dataType:"html",contentType:!1,processData:!1,timeout:1e4,success:function(n){o.append(n).removeClass("aa-modal__body--loading")},error:function(n,o){d(7,"timeout"==o?o:n.statusText)}}).done(function(){e.resolve()})}),e.promise()}function k(n,o,e){var l,t,i,C;l=n,t=o,i=e,C=s.Deferred(),l.onOpenStart(i,t),a=!0,C.resolve(l,t),C.promise().then(r).done(function(){a=!1,I=!0,n.onOpenEnd(e,o)})}s.fn.aamodal=function(n){return o[n]?o[n].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof n&&n?void d(1,n):o.init.apply(this,arguments)}});